/*******************************************************************************
 * Details_Generic_Calendar generated by Eliot.UELib using UELib.CLI.
 * Eliot.UELib Â© 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class Details_Generic_Calendar extends Details_Generic
	collapsecategories;

const CALENDAR_NumMonths = 6;

var int Month;
var bool bNoChange;
var bool bFlippingDown;
var MaterialEx MonthMaterials[6];
var MaterialEx GirlyMaterials[6];
var byte MonthViewed[6];
var byte MonthsViewed;
var name FlipUpAnim;
var name FlipDownAnim;

event PostVerifySelf()
{
	super(dnDecoration).PostVerifySelf();
	Month = __NFUN_187__(6);
	bNoChange = true;
	// End:0x8D
	if(__NFUN_173__(Month, __NFUN_166__(6, 1)))
	{
		__NFUN_741__(0, GirlyMaterials[__NFUN_166__(Month, 1)]);
		__NFUN_741__(2, MonthMaterials[__NFUN_166__(Month, 1)]);
		__NFUN_741__(3, GirlyMaterials[Month]);
		__NFUN_741__(1, MonthMaterials[Month]);
		DecoPlayAnim(FlipUpAnim);
		__NFUN_568__().__NFUN_550__(0, 1);
		__NFUN_842__();		
	}
	else
	{
		__NFUN_741__(0, GirlyMaterials[Month]);
		__NFUN_741__(2, MonthMaterials[Month]);
		__NFUN_741__(3, GirlyMaterials[__NFUN_165__(Month, 1)]);
		__NFUN_741__(1, MonthMaterials[__NFUN_165__(Month, 1)]);
	}
	UpdatedViewedMonths(none);
	return;
}

event Used(Actor Other, Pawn EventInstigator)
{
	super(dnDecoration).Used(Other, EventInstigator);
	// End:0x38
	if(__NFUN_340__(DukePlayer(EventInstigator), none))
	{
		DukePlayer(EventInstigator).GivePermanentEgoCapAward(11);
	}
	// End:0x56
	if(__NFUN_173__(Month, 0))
	{
		bNoChange = true;
		bFlippingDown = false;		
	}
	else
	{
		// End:0x75
		if(__NFUN_173__(Month, __NFUN_166__(6, 1)))
		{
			bNoChange = true;
			bFlippingDown = true;
		}
	}
	// End:0xDD
	if(bFlippingDown)
	{
		DecoPlayAnim(FlipDownAnim);
		__NFUN_842__();
		__NFUN_185__(Month);
		UpdatedViewedMonths(EventInstigator);
		// End:0xDA
		if(__NFUN_145__(bNoChange))
		{
			__NFUN_741__(1, __NFUN_740__(2));
			__NFUN_741__(3, __NFUN_740__(0));
			__NFUN_741__(2, MonthMaterials[Month]);
			__NFUN_741__(0, GirlyMaterials[Month]);
		}		
	}
	else
	{
		DecoPlayAnim(FlipUpAnim);
		__NFUN_842__();
		__NFUN_184__(Month);
		UpdatedViewedMonths(EventInstigator);
		// End:0x139
		if(__NFUN_145__(bNoChange))
		{
			__NFUN_741__(2, __NFUN_740__(1));
			__NFUN_741__(0, __NFUN_740__(3));
			__NFUN_741__(1, MonthMaterials[Month]);
			__NFUN_741__(3, GirlyMaterials[Month]);
		}
	}
	bUsable = false;
	bNoChange = false;
	return;
}

final simulated function UpdatedViewedMonths(Actor EventInstigator)
{
	// End:0x27
	if(__NFUN_173__(int(MonthViewed[Month]), 0))
	{
		MonthViewed[Month] = 1;
		__NFUN_157__(MonthsViewed);
	}
	// End:0x5E
	if(__NFUN_148__(__NFUN_173__(int(MonthsViewed), 6), __NFUN_340__(DukePlayer(EventInstigator), none)))
	{
		DukePlayer(EventInstigator).AwardAchievement(20);
	}
	return;
}

simulated event AnimEndEx(SAnimEndInfo AnimEndInfo)
{
	super(dnDecoration).AnimEndEx(AnimEndInfo);
	bUsable = true;
	return;
}

event RegisterPrecacheComponents(PrecacheIndex PrecacheIndex)
{
	local int i;

	super(dnDecoration).RegisterPrecacheComponents(PrecacheIndex);
	PrecacheIndex.__NFUN_1284__(Mesh, FlipUpAnim);
	PrecacheIndex.__NFUN_1284__(Mesh, FlipDownAnim);
	i = 0;
	J0x40:

	// End:0x86 [Loop If]
	if(__NFUN_169__(i, 6))
	{
		PrecacheIndex.__NFUN_1269__(MonthMaterials[i]);
		PrecacheIndex.__NFUN_1269__(GirlyMaterials[i]);
		__NFUN_184__(i);
		// [Loop Continue]
		goto J0x40;
	}
	return;
}

defaultproperties
{
	MonthMaterials[0]='mt_skins6.Calendar.Calendar_1_bs'
	MonthMaterials[1]='mt_skins6.Calendar.Calendar_2_bs'
	MonthMaterials[2]='mt_skins6.Calendar.Calendar_3_bs'
	MonthMaterials[3]='mt_skins6.Calendar.Calendar_4_bs'
	MonthMaterials[4]='mt_skins6.Calendar.Calendar_5_bs'
	MonthMaterials[5]='mt_skins6.Calendar.Calendar_6_bs'
	GirlyMaterials[0]='mt_skins6.Calendar.CalendarPic_1_bs'
	GirlyMaterials[1]='mt_skins6.Calendar.CalendarPic_2_bs'
	GirlyMaterials[2]='mt_skins6.Calendar.CalendarPic_3_bs'
	GirlyMaterials[3]='mt_skins6.Calendar.CalendarPic_4_bs'
	GirlyMaterials[4]='mt_skins6.Calendar.CalendarPic_5_bs'
	GirlyMaterials[5]='mt_skins6.Calendar.CalendarPic_6_bs'
	FlipUpAnim=a_calendar_downtoup
	FlipDownAnim=a_calendar_uptodown
	DecoActivities_Default=/* Array type was not detected. */
	X=/* Unknown default property type! */
	
/* Exception thrown while deserializing Engine
System.ArgumentOutOfRangeException: Length cannot be less than zero.
Parameter name: length
   at System.String.Substring(Int32 startIndex, Int32 length)
   at UELib.Core.UDefaultProperty.DeserializeDefaultPropertyValue(PropertyType type, DeserializeFlags& deserializeFlags) in E:\SteamLibrary\steamapps\common\DukeNukem\Tools\UnrealscriptDecompiler\Core\Classes\UDefaultProperty.cs:line 578 */
}