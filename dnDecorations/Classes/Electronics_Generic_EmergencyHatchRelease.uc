/*******************************************************************************
 * Electronics_Generic_EmergencyHatchRelease generated by Eliot.UELib using UELib.CLI.
 * Eliot.UELib Â© 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class Electronics_Generic_EmergencyHatchRelease extends Electronics_Generic
	collapsecategories;

var bool bClosed;
var() name ButtonPressEvent;

function PostVerifySelf()
{
	super(dnDecoration).PostVerifySelf();
	bClosed = true;
	DecoActivity(0, 'ClosedIdle');
	return;
}

event Used(Actor Other, Pawn EventInstigator)
{
	super(dnDecoration).Used(Other, EventInstigator);
	// End:0x47
	if(bClosed)
	{
		bUsable = false;
		__NFUN_607__(0.3, false, 'PerformOpen');
		EventInstigator.HandQuickAction('HandQuickAction_SlideSwitch_Right');		
	}
	else
	{
		DecoActivity(0, 'PushButton');
		EventInstigator.HandQuickAction('HandQuickAction_Switch_PushButton');
		GlobalTrigger(ButtonPressEvent);
	}
	return;
}

simulated function PerformOpen()
{
	DecoActivity(0, 'Open');
	return;
}

simulated event AnimEndEx(SAnimEndInfo AnimEndInfo)
{
	super(dnDecoration).AnimEndEx(AnimEndInfo);
	// End:0x57
	if(__NFUN_150__(__NFUN_341__(AnimEndInfo.AnimName, 'closed_2_open'), __NFUN_341__(AnimEndInfo.AnimName, 'button_press')))
	{
		DecoActivity(0, 'OpenIdle');
		bUsable = true;
		bClosed = false;		
	}
	else
	{
		// End:0x81
		if(__NFUN_341__(AnimEndInfo.AnimName, 'open_2_closed'))
		{
			DecoActivity(0, 'ClosedIdle');
			bClosed = true;
		}
	}
	return;
}

event RegisterPrecacheComponents(PrecacheIndex PrecacheIndex)
{
	super(dnDecoration).RegisterPrecacheComponents(PrecacheIndex);
	PrecacheIndex.__NFUN_1281__('HandQuickAction_SlideSwitch_Right');
	PrecacheIndex.__NFUN_1281__('HandQuickAction_Switch_PushButton');
	PrecacheIndex.__NFUN_1277__(VoicePack, 'EHR_ButtonPress');
	PrecacheIndex.__NFUN_1277__(VoicePack, 'EHR_PanelClose');
	PrecacheIndex.__NFUN_1277__(VoicePack, 'EHR_PanelOpen');
	return;
}

defaultproperties
{
	DecoActivities_Default=/* Array type was not detected. */
}