/*******************************************************************************
 * TerrainBuilder generated by Eliot.UELib using UELib.CLI.
 * Eliot.UELib Â© 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class TerrainBuilder extends BrushBuilder;

var() float Height;
var() float Width;
var() float Breadth;
var() int WidthSegments;
var() int DepthSegments;
var() name GroupName;

function BuildTerrain(int Direction, float dx, float dy, float dz, int WidthSeg, int DepthSeg)
{
	local int n, nbottom, i, j, K, X,
		Y, Idx;

	local float WidthStep, DepthStep;

	n = GetVertexCount();
	i = -1;
	J0x17:

	// End:0xB1 [Loop If]
	if(__NFUN_169__(i, 2))
	{
		j = -1;
		J0x2E:

		// End:0xA5 [Loop If]
		if(__NFUN_169__(j, 2))
		{
			K = -1;
			J0x45:

			// End:0x99 [Loop If]
			if(__NFUN_169__(K, 2))
			{
				Vertex3f(__NFUN_196__(__NFUN_195__(float(i), dx), float(2)), __NFUN_196__(__NFUN_195__(float(j), dy), float(2)), __NFUN_196__(__NFUN_195__(float(K), dz), float(2)));
				__NFUN_180__(K, 2);
				// [Loop Continue]
				goto J0x45;
			}
			__NFUN_180__(j, 2);
			// [Loop Continue]
			goto J0x2E;
		}
		__NFUN_180__(i, 2);
		// [Loop Continue]
		goto J0x17;
	}
	Poly3i(Direction, __NFUN_165__(n, 3), __NFUN_165__(n, 1), __NFUN_165__(n, 5), 'sky');
	Poly3i(Direction, __NFUN_165__(n, 3), __NFUN_165__(n, 5), __NFUN_165__(n, 7), 'sky');
	Poly3i(Direction, __NFUN_165__(n, 0), __NFUN_165__(n, 1), __NFUN_165__(n, 3), 'sky');
	Poly3i(Direction, __NFUN_165__(n, 2), __NFUN_165__(n, 3), __NFUN_165__(n, 7), 'sky');
	Poly3i(Direction, __NFUN_165__(n, 6), __NFUN_165__(n, 7), __NFUN_165__(n, 5), 'sky');
	Poly3i(Direction, __NFUN_165__(n, 4), __NFUN_165__(n, 5), __NFUN_165__(n, 1), 'sky');
	nbottom = GetVertexCount();
	WidthStep = __NFUN_196__(dx, float(WidthSeg));
	DepthStep = __NFUN_196__(dy, float(DepthSeg));
	X = 0;
	J0x1E8:

	// End:0x26B [Loop If]
	if(__NFUN_169__(X, __NFUN_165__(WidthSeg, 1)))
	{
		Y = 0;
		J0x201:

		// End:0x261 [Loop If]
		if(__NFUN_169__(Y, __NFUN_165__(DepthSeg, 1)))
		{
			Vertex3f(__NFUN_199__(__NFUN_195__(WidthStep, float(X)), __NFUN_196__(dx, float(2))), __NFUN_199__(__NFUN_195__(DepthStep, float(Y)), __NFUN_196__(dy, float(2))), __NFUN_194__(__NFUN_196__(dz, float(2))));
			__NFUN_184__(Y);
			// [Loop Continue]
			goto J0x201;
		}
		__NFUN_184__(X);
		// [Loop Continue]
		goto J0x1E8;
	}
	X = 0;
	J0x272:

	// End:0x38F [Loop If]
	if(__NFUN_169__(X, WidthSeg))
	{
		Y = 0;
		J0x288:

		// End:0x385 [Loop If]
		if(__NFUN_169__(Y, DepthSeg))
		{
			Poly3i(__NFUN_161__(Direction), __NFUN_165__(__NFUN_165__(nbottom, Y), __NFUN_162__(__NFUN_165__(DepthSeg, 1), X)), __NFUN_165__(__NFUN_165__(nbottom, Y), __NFUN_162__(__NFUN_165__(DepthSeg, 1), __NFUN_165__(X, 1))), __NFUN_165__(__NFUN_165__(__NFUN_165__(nbottom, 1), Y), __NFUN_162__(__NFUN_165__(DepthSeg, 1), __NFUN_165__(X, 1))), 'ground');
			Poly3i(__NFUN_161__(Direction), __NFUN_165__(__NFUN_165__(nbottom, Y), __NFUN_162__(__NFUN_165__(DepthSeg, 1), X)), __NFUN_165__(__NFUN_165__(__NFUN_165__(nbottom, 1), Y), __NFUN_162__(__NFUN_165__(DepthSeg, 1), __NFUN_165__(X, 1))), __NFUN_165__(__NFUN_165__(__NFUN_165__(nbottom, 1), Y), __NFUN_162__(__NFUN_165__(DepthSeg, 1), X)), 'ground');
			__NFUN_184__(Y);
			// [Loop Continue]
			goto J0x288;
		}
		__NFUN_184__(X);
		// [Loop Continue]
		goto J0x272;
	}
	X = 0;
	J0x396:

	// End:0x450 [Loop If]
	if(__NFUN_169__(X, WidthSeg))
	{
		Poly3i(__NFUN_161__(Direction), __NFUN_165__(n, 7), __NFUN_165__(__NFUN_165__(nbottom, DepthSeg), __NFUN_162__(__NFUN_165__(DepthSeg, 1), X)), __NFUN_165__(__NFUN_165__(nbottom, DepthSeg), __NFUN_162__(__NFUN_165__(DepthSeg, 1), __NFUN_165__(X, 1))), 'sky');
		Poly3i(__NFUN_161__(Direction), __NFUN_165__(n, 1), __NFUN_165__(nbottom, __NFUN_162__(__NFUN_165__(DepthSeg, 1), __NFUN_165__(X, 1))), __NFUN_165__(nbottom, __NFUN_162__(__NFUN_165__(DepthSeg, 1), X)), 'sky');
		__NFUN_184__(X);
		// [Loop Continue]
		goto J0x396;
	}
	Y = 0;
	J0x457:

	// End:0x4FE [Loop If]
	if(__NFUN_169__(Y, DepthSeg))
	{
		Poly3i(__NFUN_161__(Direction), __NFUN_165__(n, 3), __NFUN_165__(nbottom, Y), __NFUN_165__(nbottom, __NFUN_165__(Y, 1)), 'sky');
		Poly3i(__NFUN_161__(Direction), __NFUN_165__(n, 5), __NFUN_165__(__NFUN_165__(nbottom, __NFUN_162__(__NFUN_165__(DepthSeg, 1), WidthSeg)), __NFUN_165__(Y, 1)), __NFUN_165__(__NFUN_165__(nbottom, __NFUN_162__(__NFUN_165__(DepthSeg, 1), WidthSeg)), Y), 'sky');
		__NFUN_184__(Y);
		// [Loop Continue]
		goto J0x457;
	}
	return;
}

event bool Build()
{
	// End:0x49
	if(__NFUN_150__(__NFUN_150__(__NFUN_150__(__NFUN_150__(__NFUN_202__(Height, float(0)), __NFUN_202__(Width, float(0))), __NFUN_202__(Breadth, float(0))), __NFUN_171__(WidthSegments, 0)), __NFUN_171__(DepthSegments, 0)))
	{
		return BadParameters();
	}
	BeginBrush(false, GroupName);
	BuildTerrain(1, Breadth, Width, Height, WidthSegments, DepthSegments);
	return EndBrush();
	return;
}

defaultproperties
{
	Height=256
	Width=256
	Breadth=512
	WidthSegments=4
	DepthSegments=2
	GroupName=Terrain
	BitmapFilename="BBTerrain"
	ToolTip="BSP Based Terrain"
}