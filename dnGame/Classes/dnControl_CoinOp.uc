/*******************************************************************************
 * dnControl_CoinOp generated by Eliot.UELib using UELib.CLI.
 * Eliot.UELib Â© 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class dnControl_CoinOp extends dnControl_Panel
	abstract
	collapsecategories;

var private dnControlHelper_Coin Coin;
var private SMountPrefab CoinUserMount;
var localized string InsertCoinText;

event PostBeginPlay()
{
	super.PostBeginPlay();
	Coin = __NFUN_615__(class'dnControlHelper_Coin');
	// End:0x2E
	if(__NFUN_340__(Coin, none))
	{
		Coin.__NFUN_590__(true);
	}
	return;
}

simulated function AttachToUser()
{
	super(Decoration).AttachToUser();
	AttachCoinToUser();
	return;
}

simulated function DetachFromUser()
{
	super(Decoration).DetachFromUser();
	DetachCoinFromUser();
	return;
}

simulated function AttachCoinToUser()
{
	// End:0x3F
	if(__NFUN_148__(__NFUN_340__(User, none), __NFUN_340__(Coin, none)))
	{
		Coin.__NFUN_590__(false);
		Coin.__NFUN_633__(CoinUserMount, User);
	}
	return;
}

simulated function DetachCoinFromUser()
{
	// End:0x47
	if(__NFUN_148__(__NFUN_340__(User, none), __NFUN_340__(Coin, none)))
	{
		Coin.DestroyOnDismount = false;
		Coin.__NFUN_631__();
		Coin.__NFUN_590__(true);
	}
	return;
}

function SetHitTexture(MaterialEx NewHitTexture)
{
	HitTexture = NewHitTexture;
	return;
}

function MaterialEx GetHitTexture()
{
	return HitTexture;
	return;
}

function StartCoinOp()
{
	return;
}

function EndCoinOp()
{
	return;
}

function bool CanInsertCoin()
{
	return;
}

function InsertCoin()
{
	return;
}

function bool CanPressStartButton()
{
	return;
}

function PressStartButton()
{
	return;
}

function bool CanTouchScreen()
{
	return false;
	return;
}

function TouchedPanel(int X, int Y)
{
	return;
}

event RegisterPrecacheComponents(PrecacheIndex PrecacheIndex)
{
	super.RegisterPrecacheComponents(PrecacheIndex);
	PrecacheIndex.__NFUN_1266__(class'dnControlHelper_Coin');
	PrecacheIndex.__NFUN_1277__(class'VoicePack_Duke', 'BodyMotion_Short');
	PrecacheIndex.__NFUN_1277__(class'VoicePack_Duke', 'CoinFlip');
	PrecacheIndex.__NFUN_1277__(class'VoicePack_Duke', 'CoinOp_InsertCoin');
	return;
}

state() AttachUserAnim
{
	event BeginState()
	{
		super(Object).BeginState();
		StartCoinOp();
		return;
	}
	stop;
}

state() DetachUser
{
	event BeginState()
	{
		super.BeginState();
		EndCoinOp();
		DetachCoinFromUser();
		return;
	}
	stop;
}

state() PanelIdle
{
	function bool ControlEventInternal(optional int IntEvent, optional name CustomEventName)
	{
		super(dnControl).ControlEventInternal(IntEvent, CustomEventName);
		// End:0x34
		if(__NFUN_148__(__NFUN_173__(IntEvent, int(14)), CanInsertCoin()))
		{
			ControlEvent(, 'InsertCoin');
		}
		return;
	}

	simulated function UsableSomethingQueryInteractKeyInfoState(HUD HUD)
	{
		super.UsableSomethingQueryInteractKeyInfoState(HUD);
		// End:0x2B
		if(CanInsertCoin())
		{
			SetHUDKeyInfoState(HUD, 1, true, 26,,, InsertCoinText);
		}
		return;
	}
	stop;
}

state() InsertCoins
{
	event BeginState()
	{
		// End:0x32
		if(__NFUN_340__(Coin, none))
		{
			Coin.__NFUN_590__(false);
			Coin.__NFUN_633__(CoinUserMount, User, false);
		}
		return;
	}

	function bool ControlEvent(optional dnControl.EControlEvent ControlEvent, optional name CustomEventName)
	{
		global.ControlEvent(ControlEvent, CustomEventName);
		// End:0x4B
		if(__NFUN_173__(int(ControlEvent), int(10)))
		{
			InsertCoin();
			// End:0x4B
			if(__NFUN_340__(Coin, none))
			{
				Coin.__NFUN_631__();
				Coin.__NFUN_590__(true);
			}
		}
		return;
	}

	simulated function UsableSomethingQueryInteractKeyInfoState(HUD HUD)
	{
		return;
	}
	stop;
}

defaultproperties
{
	CoinUserMount=(bDontActuallyMount=false,bHideable=false,bIndependentRotation=false,bIndependentLocation=false,bMatchParentLocation=false,bMatchParentRotation=false,bSurviveDismount=true,bDontScaleByDrawScale=false,bScaleByDrawScaleNonDefault=false,bTransformDrawScale3DChange=false,bTakeParentTag=false,bTransferToCorpse=false,bDontSetOwner=false,MountParentTag=None,DrawScaleOverride=0,AppendToTag=None,ForceTag=None,ForceEvent=None,MountMeshItem=mount_handright,MountOrigin=(X=1.292418E-41,Y=2.94903E-17,Z=0),Z=0)
	InsertCoinText="<?int?dnGame.dnControl_CoinOp.InsertCoinText?>"
	States(0)=(StateName=Useable,OutEvents=none,Transitions=((ControlEvent=3,CustomName=None,NewState=AttachUserLERP)),UserAnimName=None,UserSoundName=None,MyAnim=(Flags=(bLoop=false,bNoLoopEnd=false,bFade=false,bNoRemove=false,bLoopMovement=false,bInterrupt=false,bEarlyEnd=false,bAdjustStart=false),Animation=None,Channel=0,Rate=0,TweenTime=0),MySound=(bAllowRepeats=false,bPlayAsAmbient=false,MixerGroupOverride=None,SimpleSingleSound=none,Sounds=none,SlotPriority=0,VolumePrefab=0,Slots=none,Volume=0,VolumeVariance=0,InnerRadius=0,InnerRadiusVariance=0,Radius=0,RadiusVariance=0,Pitch=0,PitchVariance=0,Flags=(bNoOverride=false,bMenuSound=false,bNoFilter=false,bNoOcclude=false,bNoAIHear=false,bNoScale=false,bSpoken=false,bPlayThroughListener=false,bNoDoppler=false,bDialogSound=false,bNoReverb=false,bEnableVis=false,bSkipFlangePrevention=false,bSkipSoundRadiusTest=false,bIgnoreTimeDilation=false),SoundLocationOverride=(bMakeRelativeForLocalPlayer=false,bMakeAbsoluteForActor=false,OverrideType=0,Location3D=(X=1.292418E-41,Y=2.94903E-17,Z=0),Z=0),Velocity3D=(X=1.292418E-41,Y=2.94903E-17,Z=0),Z=0))
	States(1)=(Offset=0,Delay=0,SlotIndex=0,ForcedIndex=0,SoundFadeInfo=(FadeInDuration=0,FadeOutStartTime=0,FadeOutDuration=0,FadeInEndCallback=None,FadeOutEndCallback=None),SoundEndCallback=None,PlayedSounds=none,Filters=none)
	States(2)=(MySoundName=None,SubAnims=none)
	States(3)=(StateName=AttachUserLERP,OutEvents=none,Transitions=((ControlEvent=5,CustomName=None,NewState=AttachUserAnim)),UserAnimName=None,UserSoundName=None,MyAnim=(Flags=(bLoop=false,bNoLoopEnd=false,bFade=false,bNoRemove=false,bLoopMovement=false,bInterrupt=false,bEarlyEnd=false,bAdjustStart=false),Animation=None,Channel=0,Rate=0,TweenTime=0),MySound=(bAllowRepeats=false,bPlayAsAmbient=false,MixerGroupOverride=None,SimpleSingleSound=none,Sounds=none,SlotPriority=0,VolumePrefab=0,Slots=none,Volume=0,VolumeVariance=0,InnerRadius=0,InnerRadiusVariance=0,Radius=0,RadiusVariance=0,Pitch=0,PitchVariance=0,Flags=(bNoOverride=false,bMenuSound=false,bNoFilter=false,bNoOcclude=false,bNoAIHear=false,bNoScale=false,bSpoken=false,bPlayThroughListener=false,bNoDoppler=false,bDialogSound=false,bNoReverb=false,bEnableVis=false,bSkipFlangePrevention=false,bSkipSoundRadiusTest=false,bIgnoreTimeDilation=false),SoundLocationOverride=(bMakeRelativeForLocalPlayer=false,bMakeAbsoluteForActor=false,OverrideType=0,Location3D=(X=1.292418E-41,Y=2.94903E-17,Z=0),Z=0),Velocity3D=(X=1.292418E-41,Y=2.94903E-17,Z=0),Z=0))
	States(4)=(Offset=0,Delay=0,SlotIndex=0,ForcedIndex=0,SoundFadeInfo=(FadeInDuration=0,FadeOutStartTime=0,FadeOutDuration=0,FadeInEndCallback=None,FadeOutEndCallback=None),SoundEndCallback=None,PlayedSounds=none,Filters=none)
	States(5)=(MySoundName=None,SubAnims=none)
	States(6)=(StateName=AttachUserAnim,OutEvents=none,Transitions=((ControlEvent=7,CustomName=None,NewState=PanelIdle)),UserAnimName=CoinOp_Activate,UserSoundName=None,MyAnim=(Flags=(bLoop=false,bNoLoopEnd=false,bFade=false,bNoRemove=false,bLoopMovement=false,bInterrupt=false,bEarlyEnd=false,bAdjustStart=false),Animation=None,Channel=0,Rate=0,TweenTime=0),MySound=(bAllowRepeats=false,bPlayAsAmbient=false,MixerGroupOverride=None,SimpleSingleSound=none,Sounds=none,SlotPriority=0,VolumePrefab=0,Slots=none,Volume=0,VolumeVariance=0,InnerRadius=0,InnerRadiusVariance=0,Radius=0,RadiusVariance=0,Pitch=0,PitchVariance=0,Flags=(bNoOverride=false,bMenuSound=false,bNoFilter=false,bNoOcclude=false,bNoAIHear=false,bNoScale=false,bSpoken=false,bPlayThroughListener=false,bNoDoppler=false,bDialogSound=false,bNoReverb=false,bEnableVis=false,bSkipFlangePrevention=false,bSkipSoundRadiusTest=false,bIgnoreTimeDilation=false),SoundLocationOverride=(bMakeRelativeForLocalPlayer=false,bMakeAbsoluteForActor=false,OverrideType=0,Location3D=(X=1.292418E-41,Y=2.94903E-17,Z=0),Z=0),Velocity3D=(X=1.292418E-41,Y=2.94903E-17,Z=0),Z=0))
	States(7)=(Offset=0,Delay=0,SlotIndex=0,ForcedIndex=0,SoundFadeInfo=(FadeInDuration=0,FadeOutStartTime=0,FadeOutDuration=0,FadeInEndCallback=None,FadeOutEndCallback=None),SoundEndCallback=None,PlayedSounds=none,Filters=none)
	HUDHelpEntries(0)=(Key=26,KeyAlt=0,HelpText="Touch Panel")
	HUDHelpEntries(1)=(Key=26,KeyAlt=0,HelpText="default")
	UserMountPrefab=(bDontActuallyMount=false,bHideable=false,bIndependentRotation=false,bIndependentLocation=false,bMatchParentLocation=false,bMatchParentRotation=false,bSurviveDismount=true,bDontScaleByDrawScale=true,bScaleByDrawScaleNonDefault=false,bTransformDrawScale3DChange=false,bTakeParentTag=false,bTransferToCorpse=false,bDontSetOwner=true,MountParentTag=None,DrawScaleOverride=0,AppendToTag=None,ForceTag=None,ForceEvent=None,MountMeshItem=None,MountOrigin=(X=1.292418E-41,Y=2.954632E-17,Z=0.4),Z=-60)
	bDisableCrosshair=true
	UsePhrase="<?int?dnGame.dnControl_CoinOp.UsePhrase?>"
	bBlockPlayers=true
	CollisionRadius=26
	CollisionHeight=30
	DrawType=8
	Mesh=none
}